//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "SERVIDOR_Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
//variables servidor
int pH_agua=0, temp_jsimple=0, temp_jterminado=0, presion_tanqueC=0, pH_gaseosa=0;
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
        : TForm(Owner)
{

}
//---------------------------------------------------------------------------
void __fastcall TForm1::FormCreate(TObject *Sender)
{
//TIMERS APAGADOS PARA CONFIGURARLOS
Timer1->Enabled = false;
Timer2->Enabled = false;
Timer3->Enabled = false;
Timer4->Enabled = false;
Timer5->Enabled = false;
//CONFIGURACIÓN DE LOS INTERVALOS DE LOS TIMERS
Timer1->Interval = 1000;
Timer2->Interval = 200;
Timer3->Interval = 200;
Timer4->Interval = 200;
Timer5->Interval = 200;
//CONFIGURACIÓN DE LOS ITEMS
DdeServerItem1->ServerConv = DdeServerConv1;
DdeServerItem2->ServerConv = DdeServerConv1;
DdeServerItem3->ServerConv = DdeServerConv1;
DdeServerItem4->ServerConv = DdeServerConv1;
DdeServerItem5->ServerConv = DdeServerConv1;
// ARRANQUE DE LA SECUENCIA
Timer1->Enabled = true;
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer1Timer(TObject *Sender)
{
  //INCREMENTO LA VARIABLE pH del agua
  //ACTUALIZO LA INTERFAZ
  Label1->Caption= IntToStr(pH_agua+=1);

  //ACTUALIZO EL VALOR EN EL ITEM
  DdeServerItem1->Text = Label1->Caption;

  //HABILITO EL TIMER 2 PARA CONTINUAR LA SECUENCIA
  Timer2->Enabled=true;
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer2Timer(TObject *Sender)
{
 //APAGO EL TIMER 2
  Timer2->Enabled=false;

  //INCREMENTO LA VARIABLE temperatura jarabe
  //ACTUALIZO LA INTERFAZ
  Label2->Caption = IntToStr(temp_jsimple+=1);

  //ACTUALIZO EL VALOR EN EL ITEM
  DdeServerItem2->Text = Label2->Caption;

  //HABILITO EL TIMER 3 PARA CONTINUAR LA SECUENCIA
  Timer3->Enabled=true;
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer3Timer(TObject *Sender)
{
 //APAGO EL TIMER 3
  Timer3->Enabled=false;

  //INCREMENTO LA VARIABLE TEMPERATURA
  //ACTUALIZO LA INTERFAZ
  Label3->Caption = IntToStr(temp_jterminado+=1);

  //ACTUALIZO EL VALOR EN EL ITEM
  DdeServerItem3->Text = Label3->Caption;

  //HABILITO EL TIMER 3 PARA CONTINUAR LA SECUENCIA
  Timer4->Enabled=true;
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer4Timer(TObject *Sender)
{
 //APAGO EL TIMER 4
  Timer4->Enabled=false;

  //INCREMENTO LA VARIABLE presion tanque
  //ACTUALIZO LA INTERFAZ
  Label4->Caption = IntToStr(presion_tanqueC+=1);

  //ACTUALIZO EL VALOR EN EL ITEM
  DdeServerItem4->Text = Label4->Caption;

  //HABILITO EL TIMER 5 PARA CONTINUAR LA SECUENCIA
  Timer5->Enabled=true;
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer5Timer(TObject *Sender)
{
 //APAGO EL TIMER 5
  Timer5->Enabled=false;

  //INCREMENTO LA VARIABLE TEMPERATURA
  //ACTUALIZO LA INTERFAZ
  Label5->Caption = IntToStr(pH_gaseosa+=1);

  //ACTUALIZO EL VALOR EN EL ITEM
  DdeServerItem5->Text = Label5->Caption;
}
//---------------------------------------------------------------------------
